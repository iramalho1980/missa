<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cânticos da Missa</title>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Ubuntu', sans-serif;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 25%, #2d2d2d 50%, #404040 75%, #595959 100%);
            min-height: 100vh;
            color: #ffffff;
            overflow-x: hidden;
        }

        .background-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 119, 198, 0.2) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, #c0c0c0, #ffffff, #ffff00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
        }

        .header p {
            font-size: 1.2rem;
            color: #c0c0c0;
            font-weight: 300;
        }

        .search-container {
            margin-bottom: 30px;
            position: relative;
        }

        .search-box {
            width: 100%;
            padding: 15px 50px 15px 20px;
            font-size: 1.1rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(192, 192, 192, 0.3);
            border-radius: 15px;
            color: #ffffff;
            font-family: 'Ubuntu', sans-serif;
            transition: all 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: rgba(255, 255, 0, 0.6);
            box-shadow: 0 0 20px rgba(255, 255, 0, 0.3);
        }

        .search-box::placeholder {
            color: rgba(192, 192, 192, 0.7);
        }

        .search-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #c0c0c0;
            font-size: 1.2rem;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .category-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            padding: 25px;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #c0c0c0, #ffff00, #90EE90);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            border-color: rgba(255, 255, 0, 0.4);
        }

        .category-card:hover::before {
            opacity: 1;
        }

        .category-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .category-icon {
            color: #ffff00;
            font-size: 1.2rem;
        }

        .songs-list {
            list-style: none;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, opacity 0.5s ease-out;
            opacity: 0;
        }

        .songs-list.expanded {
            max-height: 1000px;
            opacity: 1;
        }

        .song-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .song-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, #90EE90, #ffff00);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .song-item:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(5px);
            border-color: rgba(144, 238, 144, 0.4);
        }

        .song-item:hover::before {
            transform: scaleY(1);
        }

        .song-name {
            color: #ffffff;
            font-weight: 400;
            font-size: 1rem;
        }

        .hidden {
            display: none;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #c0c0c0;
            font-size: 1.2rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
        }

        .modal-content {
            position: relative;
            margin: 2% auto;
            width: 90%;
            max-width: 1000px;
            height: 90%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
        }

        .modal-header {
            padding: 20px 30px;
            background: rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            color: #ffffff;
            font-size: 1.5rem;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            color: #ffffff;
            font-size: 2rem;
            cursor: pointer;
            padding: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .modal-body {
            height: calc(100% - 80px);
            padding: 0;
        }

        .pdf-viewer {
            width: 100%;
            height: 100%;
            border: none;
            background: #ffffff;
        }

        /* Fullscreen Button */
        .fullscreen-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 999;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 0, 0.6);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            color: #ffff00;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fullscreen-btn:hover {
            background: rgba(255, 255, 0, 0.2);
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 255, 0, 0.4);
        }

        .fullscreen-btn:active {
            transform: scale(0.95);
        }

        /* Fullscreen notification */
        .fullscreen-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            color: #ffffff;
            padding: 20px 40px;
            border-radius: 15px;
            border: 2px solid rgba(255, 255, 0, 0.6);
            z-index: 9999;
            text-align: center;
            font-size: 1.2rem;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .fullscreen-notification.show {
            opacity: 1;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .categories-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .modal-content {
                width: 95%;
                height: 85%;
                margin: 5% auto;
            }
            
            .container {
                padding: 15px;
            }

            .fullscreen-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
                top: 15px;
                right: 15px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ffff00;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scroll Animations */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.6s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #c0c0c0, #ffff00);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #ffff00, #90EE90);
        }

        .search-results-info {
            margin-bottom: 20px;
            padding: 10px 15px;
            background: rgba(255, 255, 0, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 0, 0.3);
            color: #ffff00;
            font-size: 0.9rem;
        }

        /* Fullscreen styles */
        :fullscreen {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 25%, #2d2d2d 50%, #404040 75%, #595959 100%);
        }

        :-webkit-full-screen {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 25%, #2d2d2d 50%, #404040 75%, #595959 100%);
        }

        :-moz-full-screen {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 25%, #2d2d2d 50%, #404040 75%, #595959 100%);
        }
    </style>
</head>
<body>
    <div class="background-overlay"></div>
    
    <!-- Fullscreen Button -->
    <button class="fullscreen-btn" id="fullscreenBtn" onclick="toggleFullscreen()" title="Alternar Tela Cheia (F11)">
        <i class="fas fa-expand" id="fullscreenIcon"></i>
    </button>

    <!-- Fullscreen Notification -->
    <div class="fullscreen-notification" id="fullscreenNotification">
        <i class="fas fa-expand"></i><br>
        Clique no botão <i class="fas fa-expand"></i> para ativar a tela cheia<br>
        <small>Pressione ESC para sair da tela cheia</small>
    </div>
    
    <div class="container">
        <header class="header fade-in">
            <h1><i class="fas fa-music"></i> Cânticos da Missa</h1>
            <p>Explore nossa coleção de cânticos organizados por categoria</p>
        </header>

        <div class="search-container fade-in">
            <input type="text" class="search-box" id="searchInput" placeholder="Pesquisar por nome do cântico ou palavras-chave no conteúdo...">
            <i class="fas fa-search search-icon"></i>
        </div>

        <div id="searchResultsInfo" class="search-results-info hidden"></div>

        <div id="categoriesContainer" class="categories-grid">
            <!-- Categories will be populated by JavaScript -->
        </div>

        <div id="noResults" class="no-results hidden">
            <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 20px; color: #666;"></i>
            <p>Nenhum cântico encontrado com os termos pesquisados.</p>
        </div>
    </div>

    <!-- Modal for PDF Viewer -->
    <div id="pdfModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Carregando...</h2>
                <button class="close-btn" onclick="closeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <iframe id="pdfViewer" class="pdf-viewer" src=""></iframe>
            </div>
        </div>
    </div>

    <script>
        // Folder structure with songs - atualizada com todos os arquivos encontrados
        const folders = {
            "Abraço de Paz": [
                "esteja_sempre_com_voce.pdf",
                "irmao_minha_paz_eu_te_dou.pdf",
                "paz_paz_de_cristo.pdf"
            ],
            "Aclamação Evangelho": [
                "a_minhalma_abrirei.pdf",
                "a_vossa_palavra_senhor.pdf",
                "aleluia_como_o_pai_me_amou.pdf",
                "buscai_primeiro_o_reino_de_deus.pdf",
                "como_sao_belos.pdf",
                "eu_vim_para_escutar.pdf",
                "palavra_de_salvacao.pdf",
                "que_alegria_cristo_ressurgiu.pdf",
                "vai_falar_no_evangelho.pdf",
                "vinde_espirito_de_deus.pdf"
            ],
            "Ato Penitencial": [
                "conheco_um_coracao.pdf",
                "coracoes_arrependidos.pdf",
                "kyrie_eleison_jmj.pdf",
                "pelos_pecados_senhor_piedade_de_nos.pdf",
                "perdao_senhor.pdf",
                "renovame.pdf",
                "renovame_ii.pdf",
                "senhor_que_viestes_salvar_kirie_elleisson.pdf",
                "senhor_tende_piedade_de_nos.pdf",
                "senhor_tende_piedade_perdoai_nossa_culpa.pdf"
            ],
            "Ação de graças": [
                "deus_esta_aqui.pdf",
                "e_impossivel_nao_crer_em_ti.pdf",
                "espirito_santo.pdf",
                "obrigado_senhor.pdf"
            ],
            "Cantos Marianos": [
                "a_escolhida.pdf",
                "ave_cheia_de_graca.pdf",
                "imaculada_maria_de_deus.pdf",
                "maria_de_nazare.pdf",
                "santa_mae_maria.pdf",
                "santa_maria_vem.pdf"
            ],
            "Comunhão": [
                "a_barca.pdf",
                "a_ti_meu_deus.pdf",
                "antes_da_morte_e_ressurreicao.pdf",
                "cantar_a_beleza_da_vida.pdf",
                "como_es_lindo.pdf",
                "conheço_um_coração.pdf",
                "da_cepa_brotou_a_rama.pdf",
                "desamarrem_as_sandalias.pdf",
                "estas_entre_nos.pdf",
                "este_pranto_em_minhas_maos.pdf",
                "eu_navegarei.pdf",
                "eu_quis_comer_esta_ceia_agora.pdf",
                "eu_vim_para_que_todos_tenham_vida.pdf",
                "pelos_prados.pdf",
                "procuro_abrigo_nos_coracoes.pdf",
                "quando_teu_pai_revelou.pdf",
                "quem_nos_separara.pdf",
                "sacramento_da_comunhao.pdf",
                "sim_eu_quero.pdf",
                "sonda_me.pdf",
                "vem_eu_mostrarei.pdf",
                "vou_cantar_teu_amor.pdf"
            ],
            "Cordeiro": [
                "cordeiro_do_maior.pdf"
            ],
            "Diversos": [
                "podes_reinar.pdf",
                "prova_de_amor.pdf",
                "reunidos_aqui.pdf"
            ],
            "Entrada": [
                "a_biblia_e_a_palavra_de_deus.pdf",
                "bom_pastor.pdf",
                "coração_santo.pdf",
                "cristo_ressucitou_aleluia.pdf",
                "deixa_a_luz_do_ceu_entrar.pdf",
                "eis_me_aqui_senhor.pdf",
                "esatremos_aqui_reunidos.pdf",
                "faco_novas_todas_as_coisas.pdf",
                "hosana_hey_hosana_ha.pdf",
                "por_sua_morte.pdf",
                "porque_ele_vive.pdf",
                "senhor_quem_entrara.pdf",
                "te_amarei.pdf",
                "toda_biblia_e_comunicacao.pdf",
                "tu_es_a_razao_da_jornada.pdf",
                "vem_louvar.pdf"
            ],
            "Final": [
                "a_alegria_esta_no_coracao.pdf",
                "como_o_pai_me_enviou.pdf",
                "cristo_eh_a_felicidade.pdf",
                "deixa_luz_do_ceu_entrar.pdf",
                "hoje_e_tempo_de_louvar.pdf",
                "pelas_estradas_da_vida.pdf",
                "segura_na_mao_de_deus.pdf",
                "tomado_pela_mao.pdf",
                "tu_es_razao_jornada.pdf"
            ],
            "Glória": [
                "a_ele_seja_a_gloria.pdf",
                "gloria_a_deus_nas_alturas.pdf",
                "gloria_a_deus_nas_alturas__rock_balada.pdf",
                "gloria_ao_pai_criador.pdf",
                "gloria_a_deus_pai_eu_canto.pdf"
            ],
            "Louvor e Meditação": [
                "Desamarrem_as_sandálias.pdf",
                "a_alegria_esta_no_coracao.pdf",
                "a_nos_descei_divina_luz.pdf",
                "agua_viva.pdf",
                "amar_como_jesus_amou.pdf",
                "bate_o_sino.pdf",
                "eu_louvarei.pdf",
                "eu_quero_um_rio.pdf",
                "louvado_seja_o_meu_senhor.pdf",
                "meu_mestre__a_minha_vida_e_do_mestre.pdf",
                "noite_feliz.pdf",
                "noites_traicoeiras.pdf",
                "oracao_da_familia.pdf",
                "oracao_de_sao_francisco.pdf",
                "podes_reinar.pdf",
                "quao_grande_es_tu.pdf",
                "segura_na_mao_de_deus.pdf",
                "tao_sublime.pdf",
                "vou-cantar-teu-amor.pdf"
            ],
            "Ofertório": [
                "de_maos_estendidas.pdf",
                "meu_coracao_eh_para_ti.pdf",
                "minha_vida_tem_sentido.pdf",
                "muitos_graos_de_trigo.pdf",
                "ofertas_singelas.pdf",
                "sabes_senhor.pdf",
                "um_coracao_para_amar.pdf"
            ],
            "Santo": [
                "hosana_eh.pdf",
                "hosana_no_alto_ceu.pdf",
                "o_senhor_eh_santo.pdf",
                "santo_santo_e.pdf"
            ]
        };

        // Category icons mapping
        const categoryIcons = {
            "Abraço de Paz": "fas fa-handshake",
            "Aclamação Evangelho": "fas fa-book-open",
            "Ato Penitencial": "fas fa-praying-hands",
            "Ação de graças": "fas fa-heart",
            "Cantos Marianos": "fas fa-star",
            "Comunhão": "fas fa-bread-slice",
            "Cordeiro": "fas fa-dove",
            "Diversos": "fas fa-music",
            "Entrada": "fas fa-door-open",
            "Final": "fas fa-flag-checkered",
            "Glória": "fas fa-crown",
            "Louvor e Meditação": "fas fa-pray",
            "Ofertório": "fas fa-gift",
            "Santo": "fas fa-cross"
        };

        // Simulação de conteúdo dos PDFs para busca (em um cenário real, isso viria de um índice ou API)
        const songContent = {
            "esteja_sempre_com_voce.pdf": "esteja sempre com você paz amor felicidade bênção",
            "irmao_minha_paz_eu_te_dou.pdf": "irmão minha paz eu te dou cristo senhor",
            "paz_paz_de_cristo.pdf": "paz de cristo jesus salvador amor",
            "a_minhalma_abrirei.pdf": "minha alma abrirei senhor palavra evangelho",
            "a_vossa_palavra_senhor.pdf": "vossa palavra senhor luz caminho verdade",
            "aleluia_como_o_pai_me_amou.pdf": "aleluia pai amou jesus cristo amor eterno",
            "buscai_primeiro_o_reino_de_deus.pdf": "buscai primeiro reino deus justiça",
            "como_sao_belos.pdf": "como são belos pés mensageiros paz",
            "eu_vim_para_escutar.pdf": "vim escutar palavra senhor coração",
            "palavra_de_salvacao.pdf": "palavra salvação jesus cristo redentor",
            "que_alegria_cristo_ressurgiu.pdf": "alegria cristo ressurgiu páscoa vitória",
            "vai_falar_no_evangelho.pdf": "vai falar evangelho boa nova",
            "vinde_espirito_de_deus.pdf": "vinde espírito deus consolador",
            "conheco_um_coracao.pdf": "conheço coração arrependido perdão",
            "coracoes_arrependidos.pdf": "corações arrependidos misericórdia",
            "kyrie_eleison_jmj.pdf": "kyrie eleison senhor piedade",
            "perdao_senhor.pdf": "perdão senhor misericórdia compaixão",
            "renovame.pdf": "renova-me senhor espírito santo",
            "renovame_ii.pdf": "renova-me coração novo vida",
            "senhor_tende_piedade_perdoai_nossa_culpa.pdf": "senhor tende piedade perdoai culpa",
            "deus_esta_aqui.pdf": "deus está aqui presente amor",
            "e_impossivel_nao_crer_em_ti.pdf": "impossível não crer ti senhor",
            "espirito_santo.pdf": "espírito santo consolador paráclito",
            "obrigado_senhor.pdf": "obrigado senhor gratidão louvor",
            "a_escolhida.pdf": "escolhida maria mãe jesus",
            "ave_cheia_de_graca.pdf": "ave cheia graça maria santíssima",
            "imaculada_maria_de_deus.pdf": "imaculada maria deus mãe",
            "maria_de_nazare.pdf": "maria nazaré virgem mãe",
            "santa_mae_maria.pdf": "santa mãe maria intercessora",
            "santa_maria_vem.pdf": "santa maria vem socorro",
            "a_barca.pdf": "barca pedro jesus lago",
            "a_ti_meu_deus.pdf": "ti meu deus entrego vida",
            "antes_da_morte_e_ressurreicao.pdf": "antes morte ressurreição jesus",
            "cantar_a_beleza_da_vida.pdf": "cantar beleza vida criação",
            "da_cepa_brotou_a_rama.pdf": "cepa brotou rama videira",
            "estas_entre_nos.pdf": "estás entre nós emanuel",
            "este_pranto_em_minhas_maos.pdf": "pranto minhas mãos lágrimas",
            "eu_navegarei.pdf": "navegarei oceano espírito",
            "eu_quis_comer_esta_ceia_agora.pdf": "quis comer ceia agora eucaristia",
            "eu_vim_para_que_todos_tenham_vida.pdf": "vim todos tenham vida abundante",
            "pelos_prados.pdf": "pelos prados verdes pastor",
            "procuro_abrigo_nos_coracoes.pdf": "procuro abrigo corações refúgio",
            "quando_teu_pai_revelou.pdf": "quando teu pai revelou mistério",
            "sonda_me.pdf": "sonda-me senhor conhece coração",
            "vem_eu_mostrarei.pdf": "vem mostrarei caminho verdade",
            "cordeiro_do_maior.pdf": "cordeiro maior jesus cristo",
            "a_biblia_e_a_palavra_de_deus.pdf": "bíblia palavra deus sagrada escritura",
            "bom_pastor.pdf": "bom pastor jesus ovelhas",
            "deixa_a_luz_do_ceu_entrar.pdf": "deixa luz céu entrar coração",
            "eis_me_aqui_senhor.pdf": "eis-me aqui senhor disponível",
            "faco_novas_todas_as_coisas.pdf": "faço novas todas coisas criação",
            "porque_ele_vive.pdf": "porque ele vive posso crer",
            "senhor_quem_entrara.pdf": "senhor quem entrará templo santo",
            "te_amarei.pdf": "te amarei senhor força",
            "toda_biblia_e_comunicacao.pdf": "toda bíblia comunicação deus",
            "tu_es_a_razao_da_jornada.pdf": "tu és razão jornada caminho",
            "vem_louvar.pdf": "vem louvar senhor adoração",
            "cristo_eh_a_felicidade.pdf": "cristo felicidade alegria vida",
            "a_ele_seja_a_gloria.pdf": "ele seja glória honra",
            "gloria_a_deus_nas_alturas__rock_balada.pdf": "glória deus alturas paz terra",
            "gloria_ao_pai_criador.pdf": "glória pai criador filho espírito",
            "gloria_a_deus_pai_eu_canto.pdf": "glória deus pai eu canto céu terra mar",
            "Desamarrem_as_sandálias.pdf": "desamarrem sandálias terra santa",
            "a_alegria_esta_no_coracao.pdf": "alegria está coração festa",
            "a_nos_descei_divina_luz.pdf": "nós descei divina luz espírito",
            "agua_viva.pdf": "água viva jesus fonte",
            "amar_como_jesus_amou.pdf": "amar como jesus amou mandamento",
            "bate_o_sino.pdf": "bate sino chamada oração",
            "eu_louvarei.pdf": "louvarei senhor sempre",
            "eu_quero_um_rio.pdf": "quero rio águas vivas",
            "louvado_seja_o_meu_senhor.pdf": "louvado seja meu senhor francisco",
            "meu_mestre__a_minha_vida_e_do_mestre.pdf": "meu mestre minha vida mestre",
            "noite_feliz.pdf": "noite feliz natal jesus",
            "noites_traicoeiras.pdf": "noites traiçoeiras fidelidade",
            "oracao_da_familia.pdf": "oração família lar cristão",
            "oracao_de_sao_francisco.pdf": "oração são francisco paz",
            "podes_reinar.pdf": "podes reinar senhor rei",
            "quao_grande_es_tu.pdf": "quão grande és tu senhor",
            "segura_na_mao_de_deus.pdf": "segura mão deus confiança",
            "tao_sublime.pdf": "tão sublime sacramento eucaristia",
            "vou-cantar-teu-amor.pdf": "vou cantar teu amor sempre",
            "de_maos_estendidas.pdf": "mãos estendidas oferta",
            "meu_coracao_eh_para_ti.pdf": "meu coração para ti senhor",
            "minha_vida_tem_sentido.pdf": "minha vida tem sentido jesus",
            "muitos_graos_de_trigo.pdf": "muitos grãos trigo pão",
            "ofertas_singelas.pdf": "ofertas singelas coração",
            "sabes_senhor.pdf": "sabes senhor necessidades",
            "um_coracao_para_amar.pdf": "coração para amar servir",
            "hosana_eh.pdf": "hosana filho davi",
            "hosana_no_alto_ceu.pdf": "hosana alto céu glória",
            "o_senhor_eh_santo.pdf": "senhor santo santo santo",
            "santo_santo_e.pdf": "santo santo santo senhor"
        };

        let allSongs = [];
        let filteredData = {};
        let isSearching = false;
        let hasUserInteracted = false;

        // Fullscreen functionality
        function toggleFullscreen() {
            if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.mozFullScreenElement) {
                enterFullscreen();
            } else {
                exitFullscreen();
            }
        }

        function enterFullscreen() {
            const element = document.documentElement;
            if (element.requestFullscreen) {
                element.requestFullscreen();
            } else if (element.webkitRequestFullscreen) {
                element.webkitRequestFullscreen();
            } else if (element.mozRequestFullScreen) {
                element.mozRequestFullScreen();
            } else if (element.msRequestFullscreen) {
                element.msRequestFullscreen();
            }
        }

        function exitFullscreen() {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen();
            } else if (document.msExitFullscreen) {
                document.msExitFullscreen();
            }
        }

        function updateFullscreenButton() {
            const icon = document.getElementById('fullscreenIcon');
            const btn = document.getElementById('fullscreenBtn');
            
            if (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement) {
                icon.className = 'fas fa-compress';
                btn.title = 'Sair da Tela Cheia (ESC)';
            } else {
                icon.className = 'fas fa-expand';
                btn.title = 'Alternar Tela Cheia (F11)';
            }
        }

        function showFullscreenNotification() {
            if (!hasUserInteracted) {
                const notification = document.getElementById('fullscreenNotification');
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 4000);
            }
        }

        // Function to format song name for display
        function formatSongName(filename) {
            return filename
                .replace('.pdf', '')
                .replace(/_/g, ' ')
                .replace(/\b\w/g, l => l.toUpperCase());
        }

        // Initialize the application
        function init() {
            // Flatten all songs for search
            Object.keys(folders).forEach(category => {
                folders[category].forEach(song => {
                    allSongs.push({
                        name: formatSongName(song),
                        filename: song,
                        category: category,
                        content: songContent[song] || ""
                    });
                });
            });

            renderCategories(folders);
            setupSearch();
            addFadeInAnimation();
            
            // Show fullscreen notification after a delay
            setTimeout(showFullscreenNotification, 2000);
        }

        // Render categories and songs
        function renderCategories(data) {
            const container = document.getElementById('categoriesContainer');
            container.innerHTML = '';

            Object.keys(data).forEach((category, index) => {
                const songs = data[category];
                if (songs.length === 0) return;

                const categoryCard = document.createElement('div');
                categoryCard.className = 'category-card fade-in';
                categoryCard.style.animationDelay = `${index * 0.1}s`;

                const icon = categoryIcons[category] || 'fas fa-music';

                categoryCard.innerHTML = `
                    <h3 class="category-title" data-category="${category}">
                        <i class="${icon} category-icon"></i>
                        ${category}
                    </h3>
                    <ul class="songs-list ${!isSearching ? '' : 'expanded'}">
                        ${songs.map(song => `
                            <li class="song-item" onclick="openSong('${formatSongName(song)}', '${category}', '${song}')">
                                <span class="song-name">${formatSongName(song)}</span>
                            </li>
                        `).join('')}
                    </ul>
                `;

                container.appendChild(categoryCard);
            });

            // Add event listeners for collapsing/expanding categories (only when not searching)
            if (!isSearching) {
                document.querySelectorAll('.category-title').forEach(title => {
                    title.addEventListener('click', function() {
                        const songsList = this.nextElementSibling;
                        songsList.classList.toggle('expanded');
                        markUserInteraction();
                    });
                });
            }
        }

        // Setup search functionality
        function setupSearch() {
            const searchInput = document.getElementById('searchInput');
            let searchTimeout;

            searchInput.addEventListener('input', function() {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    const query = this.value.toLowerCase().trim();
                    
                    if (query === '') {
                        isSearching = false;
                        renderCategories(folders);
                        hideNoResults();
                        hideSearchInfo();
                    } else {
                        isSearching = true;
                        performSearch(query);
                    }
                }, 300);
            });

            searchInput.addEventListener('focus', markUserInteraction);
        }

        // Perform search
        function performSearch(query) {
            filteredData = {};
            let hasResults = false;
            let totalResults = 0;

            Object.keys(folders).forEach(category => {
                const filteredSongs = folders[category].filter(song => {
                    const songName = formatSongName(song).toLowerCase();
                    const songContentText = songContent[song] || "";
                    const categoryName = category.toLowerCase();
                    
                    return songName.includes(query) ||
                           songContentText.includes(query) ||
                           categoryName.includes(query);
                });

                if (filteredSongs.length > 0) {
                    filteredData[category] = filteredSongs;
                    hasResults = true;
                    totalResults += filteredSongs.length;
                }
            });

            if (hasResults) {
                renderCategories(filteredData);
                hideNoResults();
                showSearchInfo(totalResults, query);
            } else {
                showNoResults();
                hideSearchInfo();
            }
        }

        // Show search results info
        function showSearchInfo(count, query) {
            const searchInfo = document.getElementById('searchResultsInfo');
            searchInfo.innerHTML = `<i class="fas fa-search"></i> Encontrados ${count} cântico${count !== 1 ? 's' : ''} para "${query}"`;
            searchInfo.classList.remove('hidden');
        }

        // Hide search results info
        function hideSearchInfo() {
            document.getElementById('searchResultsInfo').classList.add('hidden');
        }

        // Show no results message
        function showNoResults() {
            document.getElementById('categoriesContainer').innerHTML = '';
            document.getElementById('noResults').classList.remove('hidden');
        }

        // Hide no results message
        function hideNoResults() {
            document.getElementById('noResults').classList.add('hidden');
        }

        // Mark user interaction
        function markUserInteraction() {
            if (!hasUserInteracted) {
                hasUserInteracted = true;
                // Try to enter fullscreen after first interaction
                setTimeout(() => {
                    if (!document.fullscreenElement && !document.webkitFullscreenElement && !document.mozFullScreenElement) {
                        // Don't force fullscreen, just update the notification
                        const notification = document.getElementById('fullscreenNotification');
                        if (notification.classList.contains('show')) {
                            notification.classList.remove('show');
                        }
                    }
                }, 1000);
            }
        }

        // Open song in modal
        function openSong(songName, category, filename) {
            markUserInteraction();
            
            const modal = document.getElementById('pdfModal');
            const modalTitle = document.getElementById('modalTitle');
            const pdfViewer = document.getElementById('pdfViewer');

            modalTitle.innerHTML = `<i class="fas fa-music"></i> ${songName}`;
            
            // Construct the path to the PDF - ajustado para buscar na pasta Letras
            const pdfPath = `Letras/[+] Letras/${encodeURIComponent(category)}/${filename}`;
            pdfViewer.src = pdfPath;
            
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';

            // Add loading state
            pdfViewer.onload = function() {
                modalTitle.innerHTML = `<i class="fas fa-music"></i> ${songName}`;
            };

            pdfViewer.onerror = function() {
                modalTitle.innerHTML = `<i class="fas fa-exclamation-triangle"></i> Erro ao carregar: ${songName}`;
            };
        }

        // Close modal
        function closeModal() {
            const modal = document.getElementById('pdfModal');
            const pdfViewer = document.getElementById('pdfViewer');
            
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            pdfViewer.src = '';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('pdfModal');
            if (event.target === modal) {
                closeModal();
            }
        }

        // Add fade-in animation to elements
        function addFadeInAnimation() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            });

            document.querySelectorAll('.fade-in').forEach(el => {
                observer.observe(el);
            });
        }

        // Event listeners for fullscreen changes
        document.addEventListener('fullscreenchange', updateFullscreenButton);
        document.addEventListener('webkitfullscreenchange', updateFullscreenButton);
        document.addEventListener('mozfullscreenchange', updateFullscreenButton);

        // Keyboard shortcuts
        document.addEventListener('keydown', function(event) {
            // ESC to close modal or exit fullscreen
            if (event.key === 'Escape') {
                if (document.getElementById('pdfModal').style.display === 'block') {
                    closeModal();
                }
                // Fullscreen exit is handled automatically by browser
            }
            
            // F11 to toggle fullscreen
            if (event.key === 'F11') {
                event.preventDefault();
                toggleFullscreen();
                markUserInteraction();
            }
            
            // Ctrl+F to focus search
            if (event.ctrlKey && event.key === 'f') {
                event.preventDefault();
                document.getElementById('searchInput').focus();
                markUserInteraction();
            }
        });

        // Track any click to mark user interaction
        document.addEventListener('click', markUserInteraction, { once: true });

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>

